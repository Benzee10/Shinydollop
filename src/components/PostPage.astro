---
import type { Page } from "astro";
import type { CollectionEntry } from "astro:content";
import PostCard from "./PostCard.astro";

interface Props {
	page: Page<CollectionEntry<"posts">>;
}

const { page } = Astro.props;
---

<div class="gallery-grid onload-animation">
	{
		page.data.map((entry, i) => (
			<PostCard
				entry={entry}
				title={entry.data.title}
				url={`/posts/${entry.slug}/`}
				published={entry.data.published}
				updated={entry.data.updated}
				tags={entry.data.tags}
				category={entry.data.category}
				image={entry.data.image}
				description={entry.data.description}
				draft={entry.data.draft}
				style={`animation-delay: calc(var(--content-delay) + ${i * 50}ms)`}
			/>
		))
	}
</div>

<style>
.gallery-grid {
	display: grid;
	grid-template-columns: 1fr;
	gap: 1.5rem;
	padding: 0;
}

@media (min-width: 640px) {
	.gallery-grid {
		grid-template-columns: repeat(2, 1fr);
	}
}

@media (min-width: 1024px) {
	.gallery-grid {
		grid-template-columns: repeat(3, 1fr);
	}
}

@media (min-width: 1280px) {
	.gallery-grid {
		grid-template-columns: repeat(4, 1fr);
	}
}
</style>